<script>
function handleInput(e) {
   var ss = e.target.selectionStart;
   var se = e.target.selectionEnd;
   e.target.value = e.target.value.toUpperCase();
   e.target.selectionStart = ss;
   e.target.selectionEnd = se;
}

function salvarArquivo() {
  var texto = document.getElementById('texto').value;
  var textoFormatado = texto.toUpperCase();

  // Cria um elemento link para download
  var link = document.createElement('a');
  link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(textoFormatado);
  link.download = 'texto_formatado.txt';
  link.style.display = 'none';
  document.body.appendChild(link);

  // Clica no link para fazer o download do arquivo
  link.click();

  // Remove o elemento link do DOM
  document.body.removeChild(link);
}
</script>

<body>
  <nav class="navbar navbar-expand-md bg-primary navbar-dark h-50">
    <div class="container-fluid">
      <form class="search-box" id="search-form">
        <textarea class="form-control" rows="10" id="texto" placeholder="Insira o texto aqui..." onInput="handleInput(event)"></textarea>
        <button type="button" class="btn btn-primary mt-3" onclick="salvarArquivo()">Salvar</button>
      </form>
    </div>
  </nav>
</body>