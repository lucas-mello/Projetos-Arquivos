<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- validação transistional,w3c -->
	<html xmlns="http://www.w3.org/1999/xhtml">
	<!-- validação transistional,w3c -->
  	<html>
  	<!-- abrir html -->
  	<html lang="pt-br">
  	<!-- linguagem -->
<head>
	   <!-- abrir meta -->
        <!-- meta, insere caracteristicas a página web-->
    	<!-- abrir 1* tag meta -->
        <meta charset="utf-8"/>
        <!-- fechar 1* tag meta -->

        <!-- abrir 2* tag meta -->
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<!-- fechar 2* tag meta -->

    	<!-- abrir 3* tag meta -->
  		<meta http-equiv="X-UA-Compatible" content="IE=9" />
  		<!-- fechar 3* tag meta -->

  		<!-- abrir 4* tag meta -->
		<meta name="GENERATOR" content="Microsoft SharePoint" />
		<!-- fechar 4* tag meta -->

		<!-- abrir 5* tag meta -->
		<meta name="progid" content="SharePoint.WebPartPage.Document" />
		<!-- fechar 5* tag meta -->

		<!-- abrir 6* tag meta -->
		<meta http-equiv="Expires" content="0" />
		<!-- fechar 6* tag meta -->

		<!-- abrir 7* tag meta -->
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<!-- fechar 7* tag meta -->

		<!-- abrir 8* tag meta -->
		<meta http-equiv="Page-Enter" content="blendTrans(Duration=1.10)">
		<!-- fechar 8* tag meta -->

		<!-- abrir 9* tag meta -->
		<meta http-equiv="Page-Exit" content="blendTrans(Duration=1.10)">
		<!-- fechar 9* tag meta -->

		<!-- abrir 10* tag meta -->
		<meta name="viewport" content="width=800px,initial-scale=1">
		<!-- fechar 10* tag meta -->

		<!-- abrir 11* tag meta -->
		<meta name="keywords" content=" texto"/>
		<!-- digite um texto em content -->
		<!-- fechar 11* tag meta -->

		<!-- abrir 12* tag meta -->
		<meta name="description" content="texto "/>
        <!-- digite um texto em content--> 
        <!-- fechar 12* tag meta -->

        <!-- abrir 13* tag meta -->           
		<meta name="robots" content="index, follow"/>
        <!-- digite um texto em content-->
        <!-- fechar 13* tag meta -->

        <!-- abrir 14* tag meta -->            
		<meta name="HandheldFriendly" content="True"/>
        <!-- digite um texto em content-->
        <!-- fechar 14* tag meta -->

        <!-- abrir 15* tag meta -->           
		<meta name="viewport" content="width=device-width, maximum-scale=1.0"/>
		<!-- fechar 15* tag meta -->

		<!-- abrir 16* tag meta -->
		<meta property="og:title" content="calculadora"/>
        <!-- digite um texto em content-->
        <!-- fechar 16* tag meta -->

        <!-- abrir 17* tag meta -->
		<meta property="og:description" content="calculadora "/>
		<!-- digite um texto em content-->
		<!-- fechar 17* tag meta -->

		<!-- abrir 18* tag meta -->
		<meta property="og:url" content="calculadora"/>
		<!-- digite um texto em content-->
		<!-- fechar 18* tag meta -->

		<!-- abrir 19* tag meta -->
		<meta property="og:site_name" content="calculadora"/>
		<!-- digite um texto em content-->
		<!-- fechar 19* tag meta -->

		<!-- abrir 20* tag meta -->
		<meta property="fb:app_id" content="1573751922880959"/>
		<!-- digite um texto em content-->
		<!-- fechar 20* tag meta -->

		<!-- abrir 21* tag meta -->
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!-- digite um texto em content-->
		<!-- fechar 21* tag meta -->
         
         <!-- fechar meta -->
         <!-- Abrir Bootstrap -->
        <link rel="stylesheet" href="https://v40.pingendo.com/assets/bootstrap/bootstrap-4.0.0-beta.1.css" type="text/css" media="screen"> 
        <link rel="stylesheet" type="text/css" href="style.css" media="screen"/>
        <!-- Fechar Bootstrap -->
	<title>Votação</title>
<style type="text/css">
	td{
		background-color: #885512;
		border-radius:10px;
	}
	</style>
    <!-- jQuery and jQueryUI -->
    <script type="text/javascript" src="./js/jquery/jquery.min.js"></script>
		
    <!-- Codebot -->
    <link href="./css/style.css" rel="stylesheet" type="text/css">
</head>

<body>
	 <nav class="navbar navbar-expand-md bg-primary navbar-dark h-50">
    <div class="container-fluid">
   
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar2SupportedContent" aria-controls="navbar2SupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>

      
	<div id="wrapper">
		<header><h1>Escolha seu candidato:</h1></header>
		<div id="content">
			<div id="picture">
				<img id="picture-party" src="" width="156" height="350" style="border-radius: 10px;-moz-border-radius: 10px;-webkit-border-radius: 10px;"/>
				
					  <p>Nome: <span id="nome"></span></p>
				      <p>Chapa: <span id="chapa"></span></p>
			
				<hr/>
				<p>Tecle VERDE para confirmar.</p>
				<p>Tecle LARANJA para corrigir.</p>
			</div>
			
			<div id="keyboard">
				<table cellspacing="20" cellpadding="5" width="100%" style="text-align: center;border-radius: 10px;" id="tabela">
					
					<tr>
						<td data-num="pt">13</td>
						<td data-num="pl">22</td>
						<td data-num="pdt">12</td>
					</tr>
					<tr>
						<td data-num="mdb">15</td>
						<td data-num="pros">90</td>
						<td data-num="novo">30</td>
					</tr>
					<tr>
						<td data-num="união brasil">44</td>
						<td data-num="up">80</td>
						<td data-num="pcb">21</td>
					</tr>
					<tr>
						<td data-num="pstu">16</td>
						<td data-num="dc">27</td>
						<td data-num="ptb">14</td>
					</tr>
						
		               
					<tr>
						<!-- <td style="border: none;"></td> -->
						<!-- <td data-num="0">0</td> -->
						<!-- <td style="border: none;"></td> -->
					</tr>

					<tr>
						<td style="background: #fff;border-radius: 10px;border:4px solid #000;"><a href="javascript:void(0);" onclick="branco();">Branco</a></td>
						<td style="background: #ffa500;border-radius: 10px;border:4px solid #000;"><a href="javascript:void(0);" onclick="corrige();">Corrige</a></td>
						<td style="background: #00fc00;border-radius: 10px;border:4px solid #000;"><a href="javascript:void(0);" onclick="confirma();">Confirma</a></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	
	<div id="fim">FIM</div>
	
	<div id="admin-bar"><a href="javascript:void(0);" onclick="admiMostra();">[A]</a></div>
	<div id="admin">
		<h2>Controle</h2>
		<li><a href="javascript:void(0);" onclick="adminReset();">Zerar votação (apaga tudo!)</a></li>
		
		<h2>Resultados</h2>
		<div id="resultados" style="margin: 0 0 20px 0;"></div>
		
		<a href="javascript:void(0);" onclick="adminVolta();">Voltar</a>
	</div>
	
	<audio id="som" src="./som.mp3"></audio>
    
    <script type="text/javascript">
		var gChapas = {
			'0': {img: './imgs/tiririca.png',  nome: 'Branco'},
			'pt': {img:'./imgs/lula.png', nome:'Luiz Inácio Lula da Silva e Geraldo Alckmin (psb)'},

			'pl': {img: './imgs/jair.png', nome: 'Jair Messias Bolsonaro/Walter Braga Netto (pl)'},

			'pdt': {img: './imgs/ciro.png', nome: 'Ciro Gomes/Ana Paula Matos (pdt)'},

			'mdb': {img: './imgs/simone.jpg', nome: 'Simone Tebet/Mara Gabrilli (psdb)'},

			'pros': {img: './imgs/pablo.jpeg', nome: 'Pablo Marçal/Fátima Pérola Neggra (pros)'},

			'novo': {img: './imgs/felipe.jpg', nome: 'Felipe D’Avila/Tiago Mitraud (novo)'},

			'união brasil': {img: './imgs/soraya.png', nome: 'Soraya Thronicke/Marcos Cintra (união brasil)'},

			'up': {img: './imgs/leo.jpg', nome: 'Leonardo Péricles/Samara Martins (up)'},

			'pcb': {img: './imgs/sofia.jpg', nome: 'Sofia Manzano/Antonio Alves (pcb)'},

			'pstu': {img: './imgs/vera.jpg', nome: 'Vera Lúcia/Raquel Tremembé (Kunã Yporã) (pstu)'},

			'dc': {img: './imgs/eymael.jpg', nome: 'José Maria Eymael/João Barbosa Bravo (dc)'},

			'ptb': {img: './imgs/roberto.jpg', nome: 'Kelmon Souza (ptb)/Roberto Jefferson(Pastor Gamonal)'}

		
		}
		var gVoto = -1; // branco
		
		function escolhe(id) {
			var aInfo = gChapas[id];
			
			$('#picture-party').attr('src', aInfo.img);
			$('#picture-party').show();			
			$('#nome').html(aInfo.nome);
			$('#chapa').html(id);
			
			gVoto = id;
		}
		
		function getDadosVotacao() {
			var votos = JSON.parse(localStorage.getItem("votos"));
			
			if(!votos) {
				localStorage.setItem("votos", {});
				votos = {};
			}
			
			return votos;
		}


		
		function confirma() {
			if(gVoto < 0) {
                alert('Escolha uma chapa!');
                return;
            }
            
            avisoFim();
			
			var votos = getDadosVotacao();

			if(!votos[gVoto]) {
				votos[gVoto] = 0;
			}
			
			votos[gVoto] += 1;
			localStorage.setItem("votos", JSON.stringify(votos));
		}
		
		function corrige() {
			resetChapa();
		}
		
		function branco() {
			escolhe(0);
		}
		
		function resetChapa() {
			gVoto = 0;
			$('#nome').empty();
			$('#chapa').empty();
			$('#picture-party').hide();
		}
		
		function tocaSomFinal() {
			document.getElementById('som').play();
			
			try {
				var som = new Media('/android_asset/www/som.mp3', function onSuccess() {}, function onError(error) { $('#admin-bar').html('ERRO: ' + error.message); });
				som.play();
			} catch(e) {}
			
		}
		
		function avisoFim() {
			$('#wrapper').hide();
			$('#fim').show();
			
			tocaSomFinal();
			
			setTimeout(function() {
				resetChapa();
				$('#fim').hide();
				$('#wrapper').show();
			}, 5000);
		}
		
		function admiMostra() {
			$('#admin').show();
			adminResultados();
		}
		
		function adminReset() {
			if(confirm('Apagar todos os votos?')) {
				localStorage.setItem("votos", JSON.stringify({}));
				admiMostra();
			}
		}
		
		function adminResultados() {
			var votos = getDadosVotacao();
			var dados = '';
			
			for(var chapa in votos) {
				dados += 'Chapa ' + chapa + ' ('+gChapas[chapa].nome+'): ' + votos[chapa] + ' votos. <br/>';
			}
			$('#resultados').html(dados);
		}
		
		function adminVolta() {
			$('#admin').hide();
		}
		
		function suportaLocalStorage() {
		  try {
			return 'localStorage' in window && window['localStorage'] !== null;
		  } catch (e) {
			return false;
		  }
		}
		
		if(!suportaLocalStorage()) {
			$('#admin-bar').html('ERRO: local storage!');
		}
        
        $('#tabela td').click(function(e) {
            escolhe($(this).data('num'));
        });
	</script>

</body>
</html>